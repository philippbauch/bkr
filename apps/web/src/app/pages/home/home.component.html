<header class="grid grid-cols-2 gap-4 px-6">
  <a bkr-forward-button class="col-span-2" routerLink="/rules">Regeln</a>
  <a bkr-forward-button class="col-span-1" routerLink="/teams">Teams</a>
  <a bkr-forward-button class="col-span-1" routerLink="/stations">Stationen</a>
  <a
    bkr-forward-button
    bkrType="primary"
    class="col-span-2"
    *ngIf="isStation()"
    routerLink="/station"
  >
    Meine Station
  </a>
</header>

<div class="space-y-1 px-6">
  <h2 class="subtitle">Bestenliste</h2>
  <p class="text-gray-500">Das aktuelle Ranking aller Teams.</p>
</div>

<ng-container *ngIf="loading() === false; else loadingIndicator">
  <ng-container *ngIf="rankingItems$ | async as rankingItems">
    <ul
      class="divide-y divide-gray-200 border-y border-gray-200"
      *ngIf="rankingItems.length > 0; else empty"
    >
      <li
        class="flex items-center gap-4 p-6"
        *ngFor="let rankingItem of rankingItems; let i = index"
      >
        <div>{{ i + 1 }}.</div>

        <div class="flex flex-1 flex-col gap-1">
          <div class="flex justify-between gap-2">
            <h3 class="name">{{ rankingItem.name }}</h3>

            <div class="flex items-center gap-2">
              <bkr-check-circle-icon
                class="text-indigo-500"
                *ngIf="rankingItem.finished"
              ></bkr-check-circle-icon>
              <span class="font-mono">{{
                formatDuration(rankingItem.time)
              }}</span>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </ng-container>

  <ng-template #empty>
    <bkr-empty>Es gibt noch keine Teams.</bkr-empty>
  </ng-template>
</ng-container>

<ng-template #loadingIndicator>
  <bkr-loading></bkr-loading>
</ng-template>
